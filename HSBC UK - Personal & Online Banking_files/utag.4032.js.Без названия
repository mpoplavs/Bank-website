//tealium universal tag - utag.4032 ut4.0.202602090301, Copyright 2026 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;u.ev={"view":1};u.scriptrequested=u.scriptrequested||false;u.map={"global_persist_parameter":"persist_parameter","global_persist_classes":"persist_classes","global_persist_ids":"persist_ids","global_persist_key":"persist_key","global_persist_page_trigger":"page_trigger"};u.extend=[function(a,b){try{if(1){b['global_persist_cross_domain_enabled']='1';try{b['global_persist_cross_domain_excluded_links']=["www.business.hsbc.uk","hsbc.signvideo.net"]}catch(e){};b['global_persist_cross_domain_tracksubdomain']='1';b['global_persist_cross_domain_iswjourney']='0'}}catch(e){utag.DB(e);}},function(a,b){try{if(1){b["global_persist_links_config"]=[{"page_url":["/current-accounts/products/premier/"],"persist_classes":[],"persist_ids":[],"persist_links":["/configuration/download-app/"],"combined_parameters":true,"combined_parameters_key":"referrer","parameters":[{"persist_key":"qp.cid","persist_parameter":"utm_campaign","paramter_override":true},{"persist_key":"qp.gclid","persist_parameter":"gclid","paramter_override":true},{"persist_key":"qp.gbraid","persist_parameter":"gbraid","paramter_override":true},{"persist_key":"qp.fbclid","persist_parameter":"fbclid","paramter_override":true},{"persist_key":"qp.ttclid","persist_parameter":"ttclid","paramter_override":true},{"persist_key":"qp.af_c_id","persist_parameter":"cid","paramter_override":true},{"persist_key":"qp.af_pid","persist_parameter":"pid","paramter_override":true}]},{"page_url":["/credit-cards/products/balance-transfer/no-fee/","/credit-cards/products/balance-transfer/low-fee/","/balance-transfer-offer/","/purchase-plus-offer/","/credit-cards/products/balance-transfer/low-fee/pre-approved/","/credit-cards/products/balance-transfer/no-fee/pre-approved/","/credit-cards/products/balance-transfer-offer/pre-approved/","/credit-cards/products/purchase-plus-offer/pre-approved/","/credit-cards/products/balance-transfer/","/credit-cards/products/balance-transfer/","/credit-cards/products/purchase-plus-offer/pre-approved-ntb/","/credit-cards/products/purchase-plus-offer/pre-approved-t2-ntb/","/credit-cards/products/rewards-offer/pre-approved/","/credit-cards/rewards-offer/"],"persist_classes":[],"persist_ids":["pp_tools_button_1","pp_tools_button_2","pp_tools_button_3"],"persist_links":[],"combined_parameters":false,"combined_parameters_key":"","parameters":[{"persist_key":"qp.hd_token","persist_parameter":"hd_token","paramter_override":true}]},{"page_url":["/loans/new-loan-aggregator/",],"persist_classes":[],"persist_ids":["pp_tools_button_1","pp_tools_button_2","pp_tools_button_3"],"persist_links":[],"combined_parameters":false,"combined_parameters_key":"","parameters":[{"persist_key":"qp.hd_token","persist_parameter":"token","paramter_override":true}]}]}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:4032");utag.DB(b);var c,d,e,f;u.data={};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){if(typeof utag_err!='undefined'){utag_err.push({e:'extension error:'+e,s:utag.cfg.path+'utag.'+id+'.js',l:c,t:'ex'})}}};utag.DB("send:4032:EXTENSIONS");utag.DB(b);c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
utag.DB("send:4032:MAPPINGS");utag.DB(u.data);if(!u.scriptrequested){var tag=typeof b!=='undefined'?b:utag&&utag_data;(function(b,u){var Util={isString:function(x){return Object.prototype.toString.call(x)==="[object String]"},isArray:function(x){return Object.prototype.toString.call(x)==="[object Array]"},param:function(l){var aa=!/\?/.test(l)?"?":'',bb=(aa==''&&/\&/.test(l))?'&':''
cc=aa||bb||"&";return cc},convertArray:function(l){return Util.isArray(l)?l:l.split(',');},excludeAnchor:function(l){return/(^#.$|^#$|^#)/.test(l)}},d={id:b['qp.'+u.data['persist_key']]||b['qp.cid']||b['qp.pid'],classes:u.data["persist_classes"],ids:u.data["persist_ids"],parameter:u.data["persist_parameter"]||"mkt="};var persistConfig=b["global_persist_links_config"]||[];var linkPersistTriggerDelay=b["linkPersistTriggerDelay"]||0;if(persistConfig&&persistConfig.length>0){setTimeout(function(){var href=document.getElementsByTagName('a')||document.anchor,len,i,ii,n,url;var persistedLinks=[];var paramsList=[];var pageUrls;var foundPage;var allpageConfigs=persistConfig.filter(function(obj){return obj.page_url.indexOf('allpages')!==-1;});var otherConfigs=persistConfig.filter(function(obj){return obj.page_url.indexOf('allpages')===-1;});persistConfig=allpageConfigs.concat(otherConfigs);for(n=href.length-1;n>=0;n--){if(typeof href[n].href!=='undefined'&&href[n].href!==""){for(var iii=0;iii<persistConfig.length;iii++){persistConfig[iii].persist_classes=(typeof persistConfig[iii].persist_classes!=="undefined")?persistConfig[iii].persist_classes:0;persistConfig[iii].persist_ids=(typeof persistConfig[iii].persist_ids!=="undefined")?persistConfig[iii].persist_ids:0;persistConfig[iii].persist_links=(typeof persistConfig[iii].persist_links!=="undefined")?persistConfig[iii].persist_links:0;persistConfig[iii].page_url=(typeof persistConfig[iii].page_url!=="undefined")?persistConfig[iii].page_url:0;persistParameters=persistConfig[iii].parameters;foundPage=false;currentPage=b["page_url"]||"";pageUrls=persistConfig[iii].page_url;for(var x=0;x<pageUrls.length;x++){if(pageUrls[x].indexOf("*")!==-1){var cleanUrl=pageUrls[x].replace("*","");if(currentPage.indexOf(cleanUrl)!==-1){foundPage=true;break;}}
else{if(pageUrls[x]===currentPage||pageUrls[x].indexOf("allpages")>-1){foundPage=true;break;}}}
if(foundPage){persistLinks("className",persistConfig[iii].persist_classes,persistConfig[iii],href[n]);persistLinks("id",persistConfig[iii].persist_ids,persistConfig[iii],href[n]);persistLinks("href",persistConfig[iii].persist_links,persistConfig[iii],href[n]);}}}}
function persistLinks(targetAttr,targetAttrConfig,persistConfig,href){var persistParameters=persistConfig.parameters;var paramsList=[];for(i=0;i<targetAttrConfig.length;i++){if((href&&!href[targetAttr])||Util.excludeAnchor(href.attributes['href']&&href.attributes['href'].value)||href.attributes["data-persisted"]){break}
if(targetAttrConfig[i]!=""&&href[targetAttr]&&href[targetAttr].indexOf(targetAttrConfig[i])!=-1){url=href.attributes['href']&&href.attributes['href'].value;for(var iiiii=0;iiiii<persistParameters.length;iiiii++){if(typeof utag_data[persistParameters[iiiii].persist_key]!=='undefined'&&utag_data[persistParameters[iiiii].persist_key]!==""){if(persistParameters[iiiii].paramter_override){var urlParameters=new URLSearchParams(url.split('?')[1]);var urlParams=urlParameters.toString();if(urlParams.indexOf(persistParameters[iiiii].persist_parameter+"=")>-1){urlParameters.delete(persistParameters[iiiii].persist_parameter)
url=url.split("?")[0]+"?"+urlParameters.toString().replace(/\+/g,'%20');paramsList.push(persistParameters[iiiii].persist_parameter+"="+encodeURIComponent(utag_data[persistParameters[iiiii].persist_key]));}
else{paramsList.push(persistParameters[iiiii].persist_parameter+"="+encodeURIComponent(utag_data[persistParameters[iiiii].persist_key]));}}
else{if(urlParams.indexOf(persistParameters[iiiii].persist_parameter+"=")==-1){paramsList.push(persistParameters[iiiii].persist_parameter+"="+encodeURIComponent(utag_data[persistParameters[iiiii].persist_key]));}}
persistedLinks.push(href);}}
if(paramsList&&paramsList.length>0){paramsListString=paramsList.join("&");if(href.attributes['href'].value.indexOf('#!')!==-1){if(persistConfig.combined_parameters){var urlParameters=new URLSearchParams(url.split('?')[1]);urlParameters.delete(persistConfig.combined_parameters_key);if(urlParameters.size>0){url=url.split("?")[0]+"?"+urlParameters.toString();}
href.attributes['href'].value=url+Util.param(url)+persistConfig.combined_parameters_key+"="+encodeURIComponent(paramsListString);}
else{href.attributes['href'].value=url+Util.param(url)+paramsListString;}}
else if(href.attributes['href'].value.indexOf('#')!==-1){var urlparts=url.split('#');if(persistConfig.combined_parameters){var urlParameters=new URLSearchParams(urlparts[0].split('?')[1]);urlParameters.delete(persistConfig.combined_parameters_key);if(urlParameters.size>0){urlparts[0]=urlparts[0].split("?")[0]+"?"+urlParameters.toString();}
href.attributes['href'].value=urlparts[0]+Util.param(urlparts[0])+persistConfig.combined_parameters_key+"="+encodeURIComponent(paramsListString)+"#"+urlparts[1];}
else{href.attributes['href'].value=urlparts[0]+Util.param(urlparts[0])+paramsListString+"#"+urlparts[1];}}
else{if(persistConfig.combined_parameters){var urlParameters=new URLSearchParams(url.split('?')[1]);urlParameters.delete(persistConfig.combined_parameters_key);if(urlParameters.size>0){url=url.split("?")[0]+"?"+urlParameters.toString();}
href.attributes['href'].value=url+Util.param(url)+persistConfig.combined_parameters_key+"="+encodeURIComponent(paramsListString);}
else{href.attributes['href'].value=url+Util.param(url)+paramsListString;}}}
paramsList=[];}}}
for(var x=0;x<persistedLinks.length;x++){persistedLinks[x].setAttribute("data-persisted","1");}},linkPersistTriggerDelay)}
if(b['global_persist_cross_domain_enabled']&&b['global_persist_cross_domain_enabled']=="1"){var links=document.getElementsByTagName('a')||document.anchor;var currentDomain=TMS.util.getCookieDomain();var sid=utag_data["tealium_session_id"]||"";var vid=utag_data["tealium_visitor_id"]||"";var param;var profile="_"+utag_data["ut.profile"].substring(0,2);var linkDomain;var documentTypes=[".pdf",".doc",".xml",".txt",".exe",".zip",".wav",".mp3",".mov",".mpg",".avi",".wmv",".docx",".xls",".xlsx",".ppt",".pptx"];var excludedLinks=b["global_persist_cross_domain_excluded_links"].concat(documentTypes)||documentTypes||[];var isExludedLink=false;var isCrossDomainLink=false;var isTracksubdomain=false;var crossDomainTriggerDelay=parseInt(b["global_persist_cross_domain_delay_trigger"])||500;function getLinkDomain(link){try{if(b["global_persist_cross_domain_tracksubdomain"]&&b["global_persist_cross_domain_tracksubdomain"]==="1"){var url=(new URL(link));var linkDomain=url.hostname;linkDomain=linkDomain.replace("www.","");return linkDomain;}
else{var url=(new URL(link));var linkDomain=url.hostname;var h=linkDomain .split("."),i=(/\.co\.|\.com\.|\.org\.|\.edu\.|\.net\.|\.asn\.|\...\.jp$/.test(linkDomain))?3:2;return h.slice(h.length-i).join(".");}}
catch(e){TMS.debug.push(e)}}
function checkInArray(item,array){try{var itemFound=false;for(var i=0;i<array.length;i++){if(item.indexOf(array[i])>-1){itemFound=true;break;}}
if(itemFound){return true;}
else{return false;}}
catch(e){TMS.debug.push(e)}}
function crossDomain(){try{if(b["global_persist_cross_domain_tracksubdomain"]&&b["global_persist_cross_domain_tracksubdomain"]==="1"){currentDomain=document.domain.replace("www.","");;}
if(sid&&vid){if(typeof(b["global_persist_cross_domain_iswjourney"])==="undefined"||(b["global_persist_cross_domain_iswjourney"]&&b["global_persist_cross_domain_iswjourney"]!=="1")){if(vid&&vid.indexOf("_")>-1){var vidParts=vid.split("_");if(vidParts.length>1){vid=vidParts[0];}}}
param="vid="+vid+profile+"&"+"sid="+sid;}
if(!!param){for(var i=0;i<links.length;i++){if(links[i].hasAttribute("href")&&links[i].href[0]!=="/"&&links[i].href[0]!==""&&links[i].href[0]!=="#"&&!links[i].hasAttribute("data-persisted-cd")){isCrossDomainLink=false;linkDomain=getLinkDomain(links[i].href);isTracksubdomain=b["global_persist_cross_domain_tracksubdomain"]&&b["global_persist_cross_domain_tracksubdomain"]==="1";if(linkDomain.indexOf("hsbc.")>-1){if(isTracksubdomain&&linkDomain&&linkDomain!==currentDomain&&(linkDomain.indexOf(currentDomain)===-1&&currentDomain.indexOf(linkDomain)===-1)){isCrossDomainLink=true;}else if(!isTracksubdomain&&linkDomain&&linkDomain!==currentDomain){isCrossDomainLink=true;}else{}}
if(isCrossDomainLink){isExludedLink=checkInArray(links[i].href,excludedLinks);if(!isExludedLink){links[i].href=links[i].href+Util.param(links[i].href)+param;links[i].setAttribute("data-persisted-cd","1");}}}}}}
catch(e){TMS.debug.push(e)}}
window.setTimeout(crossDomain,crossDomainTriggerDelay);}}(tag,u))}
utag.DB("send:4032:COMPLETE");}};utag.o[loader].loader.LOAD(id);}("4032","hsbc.uk-rbwm"));}catch(error){utag.DB(error);}